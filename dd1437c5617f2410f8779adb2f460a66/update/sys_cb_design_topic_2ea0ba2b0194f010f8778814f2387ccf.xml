<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="IT Service Request">9ea0ba2b0194f010f8778814f2387ccb</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"5e3131f5aa024e8c9375e76eb8ccba23","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"5e3131f5aa024e8c9375e76eb8ccba23"}],"goals":[{"name":"primary","trigger_id":"5e3131f5aa024e8c9375e76eb8ccba23","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":""},"id":"5c41d7ea88184ac5b57d3ff84b5705aa","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    if(vaVars.record_id!=null){\n        return 'As per your request a new Request is created.'\n    }\n    return '';\n})()\n"},"id":"898bd71ac63e44a3a782ff75887b55fa","name":"End"},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Hello {0}, \\nI can help you with creating new IT Service Request or show your existing requests.\", vaContext.getRequesterLang(), [vaInputs.user.first_name])"},"id":"c45494130ba944e5a0c4e209f924aa14","name":"Welcome message","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"2c545df349f647c59d45a84ad9b53cb7","name":"user option","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"d266ac33d3964863aa42cd88e68cbcda","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Please Select the option\", vaContext.getRequesterLang())"},"acknowledgement":{"type":"String","mode":"string","value":"gs.getMessageLang(\"You have selected the option\", vaContext.getRequesterLang())"},"confirmation":{"type":"String","mode":"string","value":""},"default_value":{"type":"String","mode":"string","value":""},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"New Request","expression":{"type":"Applicability","mode":"query","value":"user_option=new_request"},"id":"8708d08c64324ccebcd12e667c5964e7","name":"New Request"},{"type":"Branch","label":"Show Existing Requests","expression":{"type":"Applicability","mode":"query","value":"user_option=show_requests"},"id":"ee39315aa7f94cd9897e4bf409e68be7","name":"Show Existing Requests"}],"id":"feb218f2b0944c0b86c2f0deedf032b6","goal_id":"primary"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"324d50fc1cd54b11b8a13e976fbb6e76","name":"Request Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"6b142d143614423d98db59089a176a94","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Please select the Request Type\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n   \n\n        var options = [];\n        var gr = new GlideRecordSecure(table);\n        //gr.addEncodedQuery('active=true^numberSTARTSWITHINC001001');\n        gr.setLimit(10);\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('u_string_full_utf8_3') });\n        }\n\n        return options;\n    \n})(table)\n","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Sorry, there are no request types available in the system.\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n   \n\n        var options = [];\n        var gr = new GlideRecordSecure(table);\n        //gr.addEncodedQuery('active=true^numberSTARTSWITHINC001001');\n        gr.setLimit(10);\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('u_string_full_utf8_3') });\n        }\n\n        return options;\n    \n})(table)\n"}},{"type":"InputPrompt","variable_id":"c477414cb4894cc7934676d434633d28","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Please enter some additional information about your request.\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"d7d53b7cea824a278e58064ad4c5c664","name":"Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"InputPrompt","variable_id":"f0bcb9577cd842f6a8a87a9ee37cd280","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select Yes if you want to create this request for you otherwise if you want to create it for someone else then select No.\", vaContext.getRequesterLang())"},"acknowledgement":{"type":"String","mode":"string","value":""},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"211f153968c64c1f9c472eec229fc69d","name":"requested_for","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"Request is for  same user","expression":{"type":"Applicability","mode":"query","value":"requested_for=true"},"id":"9554e545bda9416cae6a65195deff0ec","name":"Request is for  same user"},{"type":"Branch","label":"Requested for someone else","expression":{"type":"Applicability","mode":"query","value":"requested_for=false"},"id":"ce4ca195a2e54367b8f1c96e71343608","name":"Requested for someone else"}],"id":"076f283cc8314f2bb49c9e67ef10c0ce","goal_id":"primary"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"2ab59505dcb64e439b3710069619fd68","name":"requested for user","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"756c22a795cb44f3a0171cc9af4d0439","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select the User for whom you want to create this Request for\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n    /* Code your glide record query logic here. For example:\n\n        var options = [];\n        var gr = new GlideRecordSecure(table);\n        gr.addEncodedQuery('active=true^numberSTARTSWITHINC001001');\n        gr.setLimit(10);\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('short_description') });\n        }\n        return options;\n    */\n    var options = [];\n    var gr = new GlideRecord(table);\n    gr.addQuery('role', 'e6e4fb4961fb2410f8779adb2f460a49');\n    gr.query();\n        while (gr.next()) {\n            options.push({ 'value': gr.getValue('user'), 'label': gr.getDisplayValue('user') });\n    }\n    return options;\n})(table)\n","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"There are no other users.\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n    /* Code your glide record query logic here. For example:\n\n        var options = [];\n        var gr = new GlideRecordSecure(table);\n        gr.addEncodedQuery('active=true^numberSTARTSWITHINC001001');\n        gr.setLimit(10);\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('short_description') });\n        }\n        return options;\n    */\n    var options = [];\n    var gr = new GlideRecord(table);\n    gr.addQuery('role', 'e6e4fb4961fb2410f8779adb2f460a49');\n    gr.query();\n        while (gr.next()) {\n            options.push({ 'value': gr.getValue('user'), 'label': gr.getDisplayValue('user') });\n    }\n    return options;\n})(table)\n"}},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    var itServiceRequest = new GlideRecord('x_snc_it_service_it_service_request');\n    itServiceRequest.initialize();\n    itServiceRequest.setValue('u_reference_4', vaInputs.request_type);\n    itServiceRequest.setValue('u_requested_by', vaInputs.user);\n    itServiceRequest.setValue('u_reference_6', vaInputs.requested_for_user);\n    itServiceRequest.setValue('u_string_1', vaInputs.short_description);\n    itServiceRequest.setValue('requested_on', new GlideDate().getByFormat('yyyy-MM-dd'));\n    itServiceRequest.setValue('priority', vaInputs.priority);\n    vaVars.record_id = itServiceRequest.insert();\n})()\n","id":"533f77b30b044c03b6c5a8760b0e271b","name":"Create It Service Request","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"query","table":"x_snc_it_service_it_service_request","fields":["u_reference_6","u_string_1","priority"],"id":"9380c544416b4cff84ffec7e70e9368f","name":"New Request","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"reference_qualifier_condition":"sys_id={{vaVars.record_id}}","condition":{"type":"Condition","mode":"glide_query","value":"sys_id={{vaVars.record_id}}"}},{"type":"TableOutput","mode":"glide_record","conditionType":"simple","query":"u_reference_6={{vaInputs.user}}","table":"x_snc_it_service_it_service_request","title":{"type":"String","mode":"string","value":"IT Service Requests of {{vaInputs.user.name}}"},"columns":[{"name":"number","label":"Number"},{"name":"u_string_1","label":"Short Description"},{"name":"priority","label":"Priority"}],"showColumnHeaders":true,"noResultsMessage":{"type":"String","mode":"string","value":"There are no requests currently created by you."},"id":"2e36d6a766294ee08fc780da5423e1c0","name":"Show IT Service Requests","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"4407d7ebe7d44da794cd9e2a9bc2a3f3","name":"priority","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"d09b795888b240d19f250e88b25e1b5c","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select the priority of the request\", vaContext.getRequesterLang())"},"acknowledgement":{"type":"String","mode":"string","value":""},"confirmation":{"type":"String","mode":"string","value":""},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    if(vaInputs.requested_for){\n        vaInputs.requested_for_user = vaInputs.user;\n    }\n})()\n","id":"7879317881904917bef9f714a67d82f9","name":"Update Requested for user","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}}],"edges":[{"type":"Edge","source_node_id":"d7d53b7cea824a278e58064ad4c5c664","target_node_id":"4407d7ebe7d44da794cd9e2a9bc2a3f3","id":"5e51589622584951881822e43f26c4a4"},{"type":"Edge","source_node_id":"533f77b30b044c03b6c5a8760b0e271b","target_node_id":"9380c544416b4cff84ffec7e70e9368f","id":"a608d18eae644f39a235ca63e92a616f"},{"type":"Edge","source_node_id":"324d50fc1cd54b11b8a13e976fbb6e76","target_node_id":"d7d53b7cea824a278e58064ad4c5c664","id":"8675454c7e6346c5baff857815679e69"},{"type":"Edge","source_node_id":"c45494130ba944e5a0c4e209f924aa14","target_node_id":"2c545df349f647c59d45a84ad9b53cb7","id":"0f5c239d059a4572beb0325622214b12"},{"type":"Edge","source_node_id":"5c41d7ea88184ac5b57d3ff84b5705aa","target_node_id":"c45494130ba944e5a0c4e209f924aa14","id":"c6f93a62763740cc9ffe69be5128451b"},{"type":"Edge","source_node_id":"2c545df349f647c59d45a84ad9b53cb7","target_node_id":"feb218f2b0944c0b86c2f0deedf032b6","id":"1f88fd587e2b4d11816f5cc8760f6706"},{"type":"Edge","source_node_id":"feb218f2b0944c0b86c2f0deedf032b6","target_node_id":"211f153968c64c1f9c472eec229fc69d","branch_id":"8708d08c64324ccebcd12e667c5964e7","id":"710d3bc1f989435e8ffe51197f54c17b","name":"8708d08c64324ccebcd12e667c5964e7"},{"type":"Edge","source_node_id":"211f153968c64c1f9c472eec229fc69d","target_node_id":"076f283cc8314f2bb49c9e67ef10c0ce","id":"f87132a21c1d4c47a5ec204ba58ab962"},{"type":"Edge","source_node_id":"076f283cc8314f2bb49c9e67ef10c0ce","target_node_id":"324d50fc1cd54b11b8a13e976fbb6e76","branch_id":"9554e545bda9416cae6a65195deff0ec","id":"00c98a90478a42fcb0473ce1896ddae5","name":"9554e545bda9416cae6a65195deff0ec"},{"type":"Edge","source_node_id":"076f283cc8314f2bb49c9e67ef10c0ce","target_node_id":"2ab59505dcb64e439b3710069619fd68","branch_id":"ce4ca195a2e54367b8f1c96e71343608","id":"7973cf64b8d6407492c752ef8b530e30","name":"ce4ca195a2e54367b8f1c96e71343608"},{"type":"Edge","source_node_id":"2ab59505dcb64e439b3710069619fd68","target_node_id":"324d50fc1cd54b11b8a13e976fbb6e76","id":"ed9912ff70514b80af15f89a41ddc881"},{"type":"Edge","source_node_id":"9380c544416b4cff84ffec7e70e9368f","target_node_id":"898bd71ac63e44a3a782ff75887b55fa","id":"b58ba2fc267b488791b49d29126e0043"},{"type":"Edge","source_node_id":"feb218f2b0944c0b86c2f0deedf032b6","target_node_id":"2e36d6a766294ee08fc780da5423e1c0","branch_id":"ee39315aa7f94cd9897e4bf409e68be7","id":"07b9f0bd6e3342659dc05f4060bff469","name":"ee39315aa7f94cd9897e4bf409e68be7"},{"type":"Edge","source_node_id":"2e36d6a766294ee08fc780da5423e1c0","target_node_id":"898bd71ac63e44a3a782ff75887b55fa","id":"72d7c10d14e34206a1a0bd4bf5f23738"},{"type":"Edge","source_node_id":"4407d7ebe7d44da794cd9e2a9bc2a3f3","target_node_id":"7879317881904917bef9f714a67d82f9","id":"33d879595bf843f090b12846ad6dfbe4"},{"type":"Edge","source_node_id":"7879317881904917bef9f714a67d82f9","target_node_id":"533f77b30b044c03b6c5a8760b0e271b","id":"8257a62ca26f44b0bf847f3d56838b77"}],"id":"primary"}],"script_variables":[{"type":"String","name":"va_option","value":{"type":"String","mode":"string"},"list":false,"id":"76201d1fa1744e27825fdae2a567f63f","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"record_id","value":{"type":"String","mode":"string"},"list":false,"id":"c71754db357c44518b700831974a5a9a","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"Create new request","element":"new_request"},{"name":"show all requests","element":"show_requests"}],"id":"d266ac33d3964863aa42cd88e68cbcda","name":"user_option","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"x_snc_it_service_request_type","id":"6b142d143614423d98db59089a176a94","name":"request_type","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"String","name":"short_description","list":false,"id":"c477414cb4894cc7934676d434633d28","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"True/False","id":"f0bcb9577cd842f6a8a87a9ee37cd280","name":"requested_for","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","table":"sys_user_has_role","id":"756c22a795cb44f3a0171cc9af4d0439","name":"requested_for_user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","choices":[{"name":"Low","element":"3"},{"name":"Medium","element":"2"},{"name":"High","element":"1"}],"id":"d09b795888b240d19f250e88b25e1b5c","name":"priority","formatType":"text","secure":false,"sensitive":false,"list":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":["x_snc_it_service.employee","x_snc_it_service.it admin","admin"],"scope":"dd1437c5617f2410f8779adb2f460a66","domain":"global","topic_type":"STANDARD","channels":[],"id":"4e790f252c58b810f877743856500699","name":"IT Service Request","key_phrases":["IT Service Request","Service Request","Monitor issue","VPN","Account access","IT Request"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"autopilot_topic":false,"design_categories":[],"triggerable_by_notification":false,"auto_resolution_enabled":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>4e790f252c58b810f877743856500699</design_topic_id>
        <name>IT Service Request</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-05-29 19:38:12</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>2ea0ba2b0194f010f8778814f2387ccf</sys_id>
        <sys_mod_count>11</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="IT Service Request Management" source="x_snc_it_service">dd1437c5617f2410f8779adb2f460a66</sys_package>
        <sys_policy/>
        <sys_scope display_value="IT Service Request Management">dd1437c5617f2410f8779adb2f460a66</sys_scope>
        <sys_update_name>sys_cb_design_topic_2ea0ba2b0194f010f8778814f2387ccf</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-05-30 17:25:21</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
